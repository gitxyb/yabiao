<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf8">
	<title></title>
	<style>
	</style>
</head>
<body>
<!--	<p>{{user.username}}</p>
	<div>
		<img src="/static/{{user.prouser.headImg}}" />
	</div>
	<input type='button' value='登出' onclick="location.assign('/logout/')">
-->
	<div id='login_msg'>
	<form action="/login/" method="post">{% csrf_token %}
		用户名：<input type="text" name="username" id='username'>
		密码：<input type="password" name="password" id='password'>
		<input type="button" value=" 登录" onclick="login()" />
	</form>
	</div>
	<hr/>
	<div>当前事件是：
	<script>
		var now = new Date();
		document.write(now.toLocaleString())
	</script>
	</div>
	<script>
		function login(){
			hr = new XMLHttpRequest();
			hr.open('post','/login/',true);		<!-- 发送方式 -->
			hr.setRequestHeader("Content-type","application/x-www-form-urlencoded");
			hr.onreadystatechange = process;	<!-- 确定事件处理 -->
			var username = document.getElementById('username').value;
			var password = document.getElementById('password').value;
			hr.send('username='+username+'&password='+password );
		}
		function process(){
			if (hr.readyState == 4 && hr.status == 200){
				if (hr.responseText != ''){
					var login_msg = document.getElementById('login_msg');
					login_msg.innerHTML = 'welcome '+hr.responseText;
				}
			}
		}
	</script>
</body>
</html>
